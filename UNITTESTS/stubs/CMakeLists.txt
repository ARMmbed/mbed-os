# Copyright (c) 2020 ARM Limited. All rights reserved.
# SPDX-License-Identifier: Apache-2.0

add_library(mbed-os-stubs-headers INTERFACE)
add_library(mbed-os-stubs)

target_include_directories(mbed-os-stubs-headers
    INTERFACE
        ${MBED_PATH}/UNITTESTS/target_h
        ${MBED_PATH}/events/tests/UNITTESTS/target_h
        ${MBED_PATH}/events/tests/UNITTESTS/target_h/equeue
        ${MBED_PATH}/UNITTESTS/target_h/platform
        ${MBED_PATH}/UNITTESTS/target_h/platform/cxxsupport
        ${MBED_PATH}/UNITTESTS/target_h/drivers
        ${MBED_PATH}/UNITTESTS/target_h/rtos/include
        ${MBED_PATH}/UNITTESTS/stubs
        ${MBED_PATH}/features
        ${MBED_PATH}/platform/include
        ${MBED_PATH}/platform/include/platform
        ${MBED_PATH}/platform/mbed-trace/include
        ${MBED_PATH}/storage/filesystem/littlefs/include
        ${MBED_PATH}/storage/filesystem/fat/include
        ${MBED_PATH}/storage/blockdevice/include
        ${MBED_PATH}/storage/filesystem/include
        ${MBED_PATH}/storage/kvstore/include
        ${MBED_PATH}/storage/kvstore/kv_config
        ${MBED_PATH}/storage/kvstore/kv_config/include
        ${MBED_PATH}/storage/kvstore/tdbstore/include
        ${MBED_PATH}/storage/kvstore/filesystemstore/include
        ${MBED_PATH}/storage/kvstore/kvstore_global_api/include
        ${MBED_PATH}/drivers
        ${MBED_PATH}/drivers/include
        ${MBED_PATH}/drivers/include/drivers
        ${MBED_PATH}/drivers/include/drivers/internal
        ${MBED_PATH}/hal
        ${MBED_PATH}/hal/include
        ${MBED_PATH}/events/include
        ${MBED_PATH}/events/include/events/internal
        ${MBED_PATH}/events/source
        ${MBED_PATH}/rtos/include
        ${MBED_PATH}/features/frameworks
        ${MBED_PATH}/connectivity/libraries/nanostack-libservice
        ${MBED_PATH}/connectivity/libraries/nanostack-libservice/mbed-client-libservice
        ${MBED_PATH}/connectivity/netsocket/include
        ${MBED_PATH}/features/filesystem/fat
        ${MBED_PATH}/features/filesystem/fat/ChaN
        ${MBED_PATH}/features/filesystem/bd
        ${MBED_PATH}/features/filesystem/
        ${MBED_PATH}/features/filesystem/littlefs
        ${MBED_PATH}/features/filesystem/littlefs/littlefs
        ${MBED_PATH}/connectivity/cellular/include/cellular/framework/API
        ${MBED_PATH}/connectivity/cellular/include/cellular/framework/AT
        ${MBED_PATH}/connectivity/cellular/include/cellular/framework/device
        ${MBED_PATH}/connectivity/cellular/include/cellular/framework
        ${MBED_PATH}/connectivity/cellular/include/cellular/framework/common
        ${MBED_PATH}/connectivity
        ${MBED_PATH}/connectivity/lorawan/include/lorawan
        ${MBED_PATH}/connectivity/lorawan/lorastack
        ${MBED_PATH}/connectivity/lorawan/lorastack/mac
        ${MBED_PATH}/connectivity/lorawan/lorastack/phy
        ${MBED_PATH}/connectivity/lorawan
        ${MBED_PATH}/connectivity/mbedtls
        ${MBED_PATH}/connectivity/mbedtls/include
        ${MBED_PATH}/connectivity/FEATURE_BLE/include
        ${MBED_PATH}/connectivity/FEATURE_BLE/include/ble
        ${gtest_SOURCE_DIR}/include
        ${gmock_SOURCE_DIR}/include
)

target_sources(mbed-os-stubs
    PRIVATE
        ${MBED_PATH}/UNITTESTS/stubs/aes_stub.c
        #${MBED_PATH}/UNITTESTS/stubs/AT_CellularContext_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/AT_CellularDevice_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/AT_CellularInformation_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/AT_CellularNetwork_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/AT_CellularSMS_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/AT_CellularStack_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/AT_ControlPlane_netif_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/ATHandler_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/BufferedBlockDevice_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/BufferedSerial_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/CellularContext_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/CellularDevice_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/CellularInterface_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/CellularStateMachine_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/CellularUtil_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/ChainingBlockDevice_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/cipher_stub.c
        #${MBED_PATH}/UNITTESTS/stubs/cmac_stub.c
        #${MBED_PATH}/UNITTESTS/stubs/ConditionVariable_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/EmulatedSD.cpp
        #${MBED_PATH}/UNITTESTS/stubs/equeue_stub.c
        #${MBED_PATH}/UNITTESTS/stubs/EventFlags_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/EventQueue_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/ExhaustibleBlockDevice_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/FileHandle_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/FlashSimBlockDevice_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/HeapBlockDevice_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/ip4tos_stub.c
        #${MBED_PATH}/UNITTESTS/stubs/Kernel_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/kv_config_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/LoRaMacChannelPlan_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/LoRaMacCommand_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/LoRaMacCrypto_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/LoRaMac_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/LoRaPHYEU868_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/LoRaPHY_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/LoRaWANStack_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/LoRaWANTimer_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/mbed_assert_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/mbed_atomic_stub.c
        #${MBED_PATH}/UNITTESTS/stubs/mbed_critical_stub.c
        #${MBED_PATH}/UNITTESTS/stubs/mbed_error.c
        #${MBED_PATH}/UNITTESTS/stubs/mbed_poll_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/mbed_retarget_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/mbed_rtos_rtx_stub.c
        #${MBED_PATH}/UNITTESTS/stubs/mbed_shared_queues_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/mbed_wait_api_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/MBRBlockDevice_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/MeshInterface_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/Mutex_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/NetworkInterfaceDefaults_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/NetworkInterface_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/NetworkStack_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/nsapi_dns_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/nvic_wrapper_stub.c
        #${MBED_PATH}/UNITTESTS/stubs/ObservingBlockDevice_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/ProfilingBlockDevice_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/pwmout_api_stub.c
        #${MBED_PATH}/UNITTESTS/stubs/randLIB_stub.c
        #${MBED_PATH}/UNITTESTS/stubs/randLIB_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/ReadOnlyBlockDevice_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/rtx_mutex_stub.c
        #${MBED_PATH}/UNITTESTS/stubs/Semaphore_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/SerialBase_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/SlicingBlockDevice_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/SocketAddress_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/SocketStats_Stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/stoip4_stub.c
        #${MBED_PATH}/UNITTESTS/stubs/ThisThread_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/Thread_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/us_ticker_stub.cpp
        #${MBED_PATH}/UNITTESTS/stubs/watchdog_api_stub.c
)

target_link_libraries(mbed-os-stubs
    PRIVATE
        mbed-os-stubs-headers
)
